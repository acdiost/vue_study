<html>

<head>
    <title>Vue 计算属性</title>
    <script src="https://unpkg.com/vue@2.7.14/dist/vue.js"></script>
</head>

<body>
    <div id="app">
        <h3>购物车 🚕 :<span> {{ totalCount }} </span></h3>
        <h3>购物车 🚕 :<span> {{ totalCount }} </span></h3>
        <h3>购物车 🚕 :<span> {{ totalCountFn() }} </span></h3>
        <h3>购物车 🚕 :<span> {{ totalCountFn() }} </span></h3>
        <table border="1">
            <tr>
                <td>名称</td>
                <td>数量</td>
            </tr>
            <tr v-for="item in list">
                <td>{{ item.name }}</td>
                <td>{{ item.num }}</td>
            </tr>
        </table>
        <p>count: {{ totalCount }}</p>
    </div>

    <script>
        const app = new Vue({
            el: '#app',
            data: {
                list: [
                    { id: 1, name: 'apple', num: 10 },
                    { id: 2, name: 'banana', num: 20 },
                    { id: 3, name: 'orange', num: 30 },
                    { id: 4, name: 'grape', num: 40 },
                    { id: 5, name: 'pear', num: 50 },
                ]
            },
            computed: {
                totalCount() {
                    console.log('计算属性缓存执行了')
                    let total = 0;
                    this.list.reduce((sum, item) => total += item.num, 0);
                    return total
                }
            },
            methods: {
                totalCountFn() {
                    console.log('方法执行了多次');
                    let total = 0;
                    this.list.reduce((sum, item) => total += item.num, 0);
                    return total
                }
            }
        })
    </script>
</body>

</html>
